-- LocalScript: ATM Looter V12 Part 1
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local Camera = Workspace.CurrentCamera

-- =========================
-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å
-- =========================
local loopActive = false
local lastPosition = nil
local openPosition = nil
local loopThread = nil -- ‡πÄ‡∏Å‡πá‡∏ö Thread loop ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î

-- =========================
-- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
-- =========================
local speedLoot = 0.1
local speedUseBag = 0.01

-- =========================
-- ‡∏à‡∏∏‡∏î‡∏ß‡∏≤‡∏õ‡∏´‡∏•‡∏±‡∏Å
-- =========================
local atmPosition = Vector3.new(379.88, 167.87, 23.01)

-- =========================
-- ‡∏´‡∏≤ ATMModel ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÉ‡∏ô workspace
-- =========================
local function getAllATMs()
    local atms = {}
    for _, obj in pairs(Workspace:GetChildren()) do
        if obj:FindFirstChild("ATMModel") then
            table.insert(atms, obj.ATMModel)
        end
    end
    return atms
end

local ATMs = getAllATMs()

-- =========================
-- ‡πÄ‡∏õ‡∏¥‡∏î ProximityPrompt ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
-- =========================
RunService.Heartbeat:Connect(function()
    for _, atm in pairs(ATMs) do
        if atm.Model and atm.Model:FindFirstChild("Part") then
            local prompt = atm.Model.Part:FindFirstChild("ProximityPrompt")
            if prompt and not prompt.Enabled then
                prompt.Enabled = true
            end
        end
    end
end)
-- =========================
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏•‡πâ‡∏ô ATM
-- =========================
local function fireATM(atm)
    if atm.Model and atm.Model:FindFirstChild("Part") then
        local prompt = atm.Model.Part:FindFirstChild("ProximityPrompt")
        if prompt then
            prompt:InputHoldBegin()
            wait(speedLoot)
            prompt:InputHoldEnd()
        end
    end
end

-- =========================
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏ä‡πâ Money Bag
-- =========================
local function useMoneyBag()
    local backpack = LocalPlayer:WaitForChild("Backpack")
    local character = LocalPlayer.Character
    if not character then return end
    local tool = character:FindFirstChild("Money Bag") or backpack:FindFirstChild("Money Bag")
    if tool then
        if tool.Parent ~= character then
            tool.Parent = character
        end
        tool:Activate()
    end
end

-- =========================
-- Loop ‡∏õ‡∏•‡πâ‡∏ô ATM + ‡πÉ‡∏ä‡πâ Money Bag ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏π‡πà‡∏Ç‡∏ô‡∏≤‡∏ô
-- =========================
local function startLoop()
    if loopThread then return end -- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏ã‡πâ‡∏≥
    loopThread = spawn(function()
        while loopActive do
            -- ‡∏ß‡∏≤‡∏õ ATM ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏•‡πâ‡∏ô
            local character = LocalPlayer.Character
            if character and character:FindFirstChild("HumanoidRootPart") then
                character.HumanoidRootPart.CFrame = CFrame.new(atmPosition)
            end

            -- ‡∏õ‡∏•‡πâ‡∏ô ATM ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß
            for _, atm in pairs(ATMs) do
                if not loopActive then break end
                fireATM(atm)
            end

            -- ‡πÉ‡∏ä‡πâ Money Bag ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
            local startTime = tick()
            while tick() - startTime < speedLoot and loopActive do
                useMoneyBag()
                wait(speedUseBag)
            end

            wait(0.05)
        end
        loopThread = nil -- ‡∏•‡πâ‡∏≤‡∏á thread ‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏¥‡∏î
    end)
end
-- =========================
-- ‡∏ß‡∏≤‡∏õ‡πÑ‡∏õ ATM
-- =========================
local function teleportToATMPosition()
    local character = LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        lastPosition = character.HumanoidRootPart.Position
        character.HumanoidRootPart.CFrame = CFrame.new(atmPosition)
    end
end

-- ‡∏ß‡∏≤‡∏õ‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ï‡∏≠‡∏ô‡∏õ‡∏¥‡∏î Loop
local function returnToOpenPosition()
    local character = LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") and openPosition then
        character.HumanoidRootPart.CFrame = CFrame.new(openPosition)
    end
end

-- =========================
-- ‡∏Å‡∏•‡πâ‡∏≠‡∏á Noclip (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏‡∏Å‡∏≥‡πÅ‡∏û‡∏á)
-- =========================
RunService.RenderStepped:Connect(function()
    local character = LocalPlayer.Character
    if character then
        local camCFrame = Camera.CFrame
        -- ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏∞‡∏•‡∏∏‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏ó‡∏∞‡∏•‡∏∏
        Camera.CFrame = camCFrame
    end
end)

-- =========================
-- Toggle Loop + ‡∏ß‡∏≤‡∏õ ATM
-- =========================
local function toggleLoopUI()
    loopActive = not loopActive
    if loopActive then
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            openPosition = character.HumanoidRootPart.Position
        end
        teleportToATMPosition()
        startLoop()
    else
        returnToOpenPosition()
    end
end
-- =========================
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á UI
-- =========================
local function createUI()
    local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
    local existing = PlayerGui:FindFirstChild("ATM_Looter_UI")
    if existing then existing:Destroy() end

    local ScreenGui = Instance.new("ScreenGui", PlayerGui)
    ScreenGui.Name = "ATM_Looter_UI"

    local Frame = Instance.new("Frame", ScreenGui)
    Frame.Name = "Frame"
    Frame.Size = UDim2.new(0, 260, 0, 120)
    Frame.Position = UDim2.new(0.5, -130, 0.5, -60)
    Frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
    Frame.Active = true
    Frame.Draggable = true

    -- Title
    local Title = Instance.new("TextLabel", Frame)
    Title.Size = UDim2.new(1,0,0,30)
    Title.Position = UDim2.new(0,0,0,0)
    Title.Text = "‡∏õ‡∏±‡πâ‡∏°‡πÄ‡∏á‡∏¥‡∏ô ATM V12 ü§ë"
    Title.BackgroundColor3 = Color3.fromRGB(45,45,45)
    Title.TextColor3 = Color3.fromRGB(255,255,255)
    Title.TextScaled = true

    -- Toggle Loop Button
    local ToggleButton = Instance.new("TextButton", Frame)
    ToggleButton.Size = UDim2.new(0, 240, 0, 40)
    ToggleButton.Position = UDim2.new(0, 10, 0, 40)
    ToggleButton.Text = "‡πÄ‡∏õ‡∏¥‡∏î Loop"
    ToggleButton.BackgroundColor3 = Color3.fromRGB(0,170,255)
    ToggleButton.TextColor3 = Color3.fromRGB(255,255,255)
    ToggleButton.MouseButton1Click:Connect(toggleLoopUI)

    -- ‡∏õ‡∏∏‡πà‡∏°‡∏ã‡πà‡∏≠‡∏ô/‡πÇ‡∏ä‡∏ß‡πå UI
    local HideButton = Instance.new("TextButton", Frame)
    HideButton.Size = UDim2.new(0, 30, 0, 25)
    HideButton.Position = UDim2.new(1, -35, 0, 5)
    HideButton.Text = "‚õ∂"
    HideButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
    HideButton.TextColor3 = Color3.fromRGB(255,255,255)
    HideButton.Font = Enum.Font.Gotham
    HideButton.TextScaled = true

    local uiHidden = false
    HideButton.MouseButton1Click:Connect(function()
        uiHidden = not uiHidden
        for _, child in pairs(Frame:GetChildren()) do
            if child:IsA("TextButton") or child:IsA("TextLabel") then
                if child ~= HideButton and child ~= Title then
                    child.Visible = not uiHidden
                end
            end
        end
    end)
end

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á UI ‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°
createUI()
-- =========================
-- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô UI ‡∏´‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô Character Added (‡∏ï‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤)
-- =========================
LocalPlayer.CharacterAdded:Connect(function()
    wait(1) -- ‡∏£‡∏≠ Character ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à
    createUI()
end)

-- =========================
-- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÑ‡∏•‡πà‡πÄ‡∏â‡∏î‡∏™‡∏µ UI Stroke
-- =========================
local function applyUIEffects()
    local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
    local Frame = PlayerGui:WaitForChild("ATM_Looter_UI"):WaitForChild("Frame")
    local UIStroke = Instance.new("UIStroke", Frame)
    UIStroke.Thickness = 2
    UIStroke.Transparency = 0.5

    RunService.RenderStepped:Connect(function()
        local t = tick() * 2
        local r = (math.sin(t)+1)/2
        local g = (math.sin(t+2)+1)/2
        local b = (math.sin(t+4)+1)/2
        UIStroke.Color = Color3.new(r,g,b)
    end)
end

spawn(applyUIEffects)

-- =========================
-- ‡∏™‡∏£‡∏∏‡∏õ
-- =========================
print("ATM Looter V12 Ready ‚úÖ")
print("‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏ö: ‡∏ß‡∏≤‡∏õ ATM + Loop ‡∏õ‡∏•‡πâ‡∏ô 0.03 + ‡πÉ‡∏ä‡πâ Money Bag 0.01 + ‡∏Å‡∏•‡πâ‡∏≠‡∏á Noclip + UI ‡πÄ‡∏ó‡πà ‡πÜ + ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô UI ‡∏´‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡∏ï‡∏≤‡∏¢")













for i,v in pairs(game:GetService("Workspace"):GetDescendants()) do
	if v:IsA("ProximityPrompt") then
		v["HoldDuration"] = 0
	end
end


game:GetService("ProximityPromptService").PromptButtonHoldBegan:Connect(function(v)
    v["HoldDuration"] = 0
end)
